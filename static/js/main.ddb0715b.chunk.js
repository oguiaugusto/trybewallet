(this["webpackJsonpsd-0x-project-trybewallet"]=this["webpackJsonpsd-0x-project-trybewallet"]||[]).push([[0],{31:function(e,t,a){e.exports=a.p+"static/media/logo-trybewallet.2e12587f.svg"},32:function(e,t,a){e.exports=a.p+"static/media/coin.a9fe7d52.svg"},34:function(e,t,a){e.exports=a.p+"static/media/logo-trybewallet-white.fd709601.svg"},36:function(e,t,a){e.exports=a(73)},47:function(e,t,a){},48:function(e,t,a){},72:function(e,t,a){},73:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(19),c=a.n(l),i=a(17),o=a(12),s=a(14),u=a(29),d=a(30),m=a(2);var p=function(){return function(e){return e({type:"REQUEST_API"}),fetch("https://economia.awesomeapi.com.br/json/all").then((function(e){return e.json().then((function(t){return e.ok?Promise.resolve(t):Promise.reject(t)}))})).then((function(t){return e({type:"GET_CURRENCIES",curr:t})})).catch((function(t){return e(function(e){return{type:"FAIL_REQUEST",err:e}}(t))}))}},h={email:""};var E=a(35),b={currencies:[],expenses:[],editing:!1,editingExpense:{},isFetching:!1,error:""};var f=Object(s.combineReducers)({user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SAVE_EMAIL":return Object(m.a)(Object(m.a)({},e),{},{email:t.email});default:return e}},wallet:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"REQUEST_API":return Object(m.a)(Object(m.a)({},e),{},{isFetching:!0});case"GET_CURRENCIES":var a=t.curr;return delete a.USDT,Object(m.a)(Object(m.a)({},e),{},{currencies:a,isFetching:!1});case"FAIL_REQUEST":return Object(m.a)(Object(m.a)({},e),{},{error:t.err,isFetching:!1});case"ADD_EXPENSE":var n=[].concat(Object(E.a)(e.expenses),[t.expense]).map((function(e,t){return Object(m.a)({id:t},e)}));return Object(m.a)(Object(m.a)({},e),{},{expenses:n});case"REMOVE_EXPENSE":var r=e.expenses.filter((function(e){return e.id!==t.id})).map((function(e,t){return Object(m.a)({id:t},e)}));return Object(m.a)(Object(m.a)({},e),{},{expenses:r});case"EDIT_EXPENSE":return Object(m.a)(Object(m.a)({},e),{},{editing:!0,editingExpense:e.expenses.filter((function(e){return e.id===t.id}))[0]});case"SAVE_EXPENSE":return Object(m.a)(Object(m.a)({},e),{},{editing:!1,editingExpense:{},expenses:e.expenses.map((function(e){return e.id===t.id?t.expense:e}))});default:return e}}}),g=Object(s.createStore)(f,Object(u.composeWithDevTools)(Object(s.applyMiddleware)(d.a))),v=(a(47),a(4)),x=a(5),y=a(7),j=a(6),O=a(3),N=a(16),C=a(8),S=a(31),w=a.n(S),k=a(32),F=a.n(k),A=(a(48),/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/gim),T=function(e){Object(y.a)(a,e);var t=Object(j.a)(a);function a(e){var n;return Object(v.a)(this,a),(n=t.call(this,e)).state={email:"",password:"",loggedIn:!1},n.handleChange=n.handleChange.bind(Object(C.a)(n)),n.logIn=n.logIn.bind(Object(C.a)(n)),n.enableBtn=n.enableBtn.bind(Object(C.a)(n)),n}return Object(x.a)(a,[{key:"handleChange",value:function(e){var t=e.target,a=t.name,n=t.value;this.setState(Object(N.a)({},a,n))}},{key:"logIn",value:function(){(0,this.props.saveEmail)(this.state.email),this.setState({loggedIn:!0})}},{key:"enableBtn",value:function(){var e=this.state,t=e.email,a=e.password;return!(!t.match(A)||a.length<6)}},{key:"render",value:function(){var e=this,t=this.state,a=t.email,n=t.password,l=t.loggedIn,c=this.enableBtn();if(l)return r.a.createElement(O.a,{to:"/carteira"});var i=a.match(A)?"validated-input":"unvalidated-input",o=n.length>=6?"validated-input":"unvalidated-input";return r.a.createElement("div",{className:"login-page d-flex"},r.a.createElement("div",{className:" login-container d-flex flex-column align-items-center justify-content-center "},r.a.createElement("img",{src:w.a,alt:"trybewallet logo",className:"logo"}),r.a.createElement("div",{className:"login-form d-flex flex-column"},r.a.createElement("p",{className:"login-p display-6 text-center mb-4"},"Entre para continuar"),r.a.createElement("label",{htmlFor:"email",className:"form-label"},"Digite seu email:",r.a.createElement("input",{"data-testid":"email-input",type:"text",name:"email",id:"email",placeholder:"email@email.com",className:"form-control mt-1 ".concat(i),value:a,onChange:this.handleChange,onKeyDown:function(t){return"Enter"===t.key&&c?e.logIn():null}})),r.a.createElement("label",{htmlFor:"password",className:"form-label mt-1 mb-4"},"Digite sua senha:",r.a.createElement("input",{"data-testid":"password-input",type:"password",name:"password",id:"password",placeholder:"******",className:"form-control mt-1 ".concat(o),value:n,onChange:this.handleChange,onKeyDown:function(t){return"Enter"===t.key&&c?e.logIn():null}})),r.a.createElement("button",{type:"button",className:"btn btn-primary",onClick:this.logIn,disabled:!c},"Entrar"))),r.a.createElement("div",{className:"coin-image align-items-center justify-content-center"},r.a.createElement("img",{src:F.a,alt:"coin"})))}}]),a}(r.a.Component),D=Object(o.b)(null,(function(e){return{saveEmail:function(t){return e(function(e){return{type:"SAVE_EMAIL",email:e}}(t))}}}))(T),I=a(33),R=(a(72),function(e){Object(y.a)(a,e);var t=Object(j.a)(a);function a(e){var n;return Object(v.a)(this,a),(n=t.call(this,e)).state={expanded:!0},n.handleExpand=n.handleExpand.bind(Object(C.a)(n)),n}return Object(x.a)(a,[{key:"handleExpand",value:function(){this.setState((function(e){return{expanded:!e.expanded}}))}},{key:"render",value:function(){var e=this.props,t=e.isFetching,a=e.editing,n=this.state.expanded,l=a?"column-editing":"",c=n?"open":"close",i=n?"Min.":"Max.";return r.a.createElement("div",{className:"wallet-page d-flex"},r.a.createElement("div",{className:"wallet-left-column d-flex flex-column align-items-center\n            ".concat(l," ").concat(c)},r.a.createElement("button",{type:"button",className:"expand-btn",onClick:this.handleExpand},i),r.a.createElement(V,null),r.a.createElement("div",{className:"line"}),r.a.createElement(z,null)),r.a.createElement("div",{className:"right-column d-flex align-items-center justify-content-center"},t?r.a.createElement(I.TailSpin,{type:"TailSpin",color:"#252525",height:30,width:30}):null,r.a.createElement(Z,null)))}}]),a}(r.a.Component)),P=Object(o.b)((function(e){return{isFetching:e.wallet.isFetching,editing:e.wallet.editing}}))(R);R.defaultProps={isFetching:!1,editing:!1};var _=function(e){Object(y.a)(a,e);var t=Object(j.a)(a);function a(){return Object(v.a)(this,a),t.apply(this,arguments)}return Object(x.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"not-found-page"},r.a.createElement("h1",null,"P\xe1gina n\xe3o encontrada"),r.a.createElement("h2",null,"Por favor, ",r.a.createElement(i.b,{to:"/"},"clique aqui")," para logar."))}}]),a}(n.Component),M=function(e){Object(y.a)(a,e);var t=Object(j.a)(a);function a(){return Object(v.a)(this,a),t.apply(this,arguments)}return Object(x.a)(a,[{key:"render",value:function(){return r.a.createElement(O.d,null,r.a.createElement(O.b,{exact:!0,path:"/",component:D}),r.a.createElement(O.b,{exact:!0,path:"/carteira",component:P}),r.a.createElement(O.b,{path:"*",component:_}))}}]),a}(n.Component),U=a(34),B=a.n(U),L=function(e){Object(y.a)(a,e);var t=Object(j.a)(a);function a(e){var n;return Object(v.a)(this,a),(n=t.call(this,e)).getTotalExpenses=n.getTotalExpenses.bind(Object(C.a)(n)),n}return Object(x.a)(a,[{key:"getTotalExpenses",value:function(){return this.props.expenses.reduce((function(e,t){var a=t.value;return a=parseFloat(a),"BRL"!==t.currency&&(a*=parseFloat(t.exchangeRates[t.currency].ask)),e+a}),0)}},{key:"render",value:function(){var e=this.props.email;return r.a.createElement("header",{className:"wallet-header d-flex flex-column align-item-center"},r.a.createElement("div",{className:"logo d-flex justify-content-center pt-4"},r.a.createElement("img",{src:B.a,alt:"logo"})),r.a.createElement("div",{className:"info d-flex flex-column align-items-center"},r.a.createElement("p",{"data-testid":"email-field",className:"email-field mt-2 mb-1"},e),r.a.createElement("p",{className:"expenses mb-3"},r.a.createElement("span",{"data-testid":"total-field",className:"total-field"},this.getTotalExpenses().toFixed(2)),r.a.createElement("span",null," "),r.a.createElement("span",{"data-testid":"header-currency-field",className:"header-currency-field"},"BRL"))))}}]),a}(n.Component),V=Object(o.b)((function(e){return{email:e.user.email,expenses:e.wallet.expenses}}))(L),X=function(e){Object(y.a)(a,e);var t=Object(j.a)(a);function a(){return Object(v.a)(this,a),t.apply(this,arguments)}return Object(x.a)(a,[{key:"render",value:function(){var e=this.props,t=e.value,a=e.description,n=e.currency,l=e.method,c=e.tag,i=e.handleChange,o=e.supportedCurrencies;return r.a.createElement("div",{className:"fields d-flex flex-column"},r.a.createElement("label",{htmlFor:"value",className:"form-label"},"Qual o valor da despesa?",r.a.createElement("input",{"data-testid":"value-input",type:"number",name:"value",id:"value",className:"form-control",value:t,onChange:i})),r.a.createElement("label",{htmlFor:"description",className:"form-label"},"Sobre o que se trata?",r.a.createElement("input",{"data-testid":"description-input",type:"text",name:"description",id:"description",className:"form-control",value:a,onChange:i})),r.a.createElement("label",{htmlFor:"currency",className:"form-label"},"Moeda",r.a.createElement("select",{"data-testid":"currency-input",name:"currency",id:"currency",className:"form-select",onChange:i,value:n},o.map((function(e){return r.a.createElement("option",{"data-testid":e,key:"currency-".concat(e),value:e},e)})))),r.a.createElement("label",{htmlFor:"method",className:"form-label"},"Qual o m\xe9todo de pagamento?",r.a.createElement("select",{"data-testid":"method-input",name:"method",id:"method",className:"form-select",onChange:i,value:l},r.a.createElement("option",{value:"defaultSelect",disabled:!0,hidden:!0},"M\xe9todo de pagamento"),r.a.createElement("option",{value:"Dinheiro"},"Dinheiro"),r.a.createElement("option",{value:"Cart\xe3o de cr\xe9dito"},"Cart\xe3o de cr\xe9dito"),r.a.createElement("option",{value:"Cart\xe3o de d\xe9bito"},"Cart\xe3o de d\xe9bito"))),r.a.createElement("label",{htmlFor:"tag",className:"form-label"},"Qual a categoria da despesa?",r.a.createElement("select",{"data-testid":"tag-input",name:"tag",id:"tag",className:"form-select",onChange:i,value:c},r.a.createElement("option",{value:"defaultSelect",disabled:!0,hidden:!0},"Categoria da despesa"),r.a.createElement("option",{value:"Alimenta\xe7\xe3o"},"Alimenta\xe7\xe3o"),r.a.createElement("option",{value:"Lazer"},"Lazer"),r.a.createElement("option",{value:"Trabalho"},"Trabalho"),r.a.createElement("option",{value:"Transporte"},"Transporte"),r.a.createElement("option",{value:"Sa\xfade"},"Sa\xfade"))))}}]),a}(n.Component),Q=function(e){Object(y.a)(a,e);var t=Object(j.a)(a);function a(e){var n;return Object(v.a)(this,a),(n=t.call(this,e)).state={value:0,description:"",currency:"USD",method:"defaultSelect",tag:"defaultSelect",settledFields:!1},n.handleChange=n.handleChange.bind(Object(C.a)(n)),n.getCurrencies=n.getCurrencies.bind(Object(C.a)(n)),n.setEditingFields=n.setEditingFields.bind(Object(C.a)(n)),n.handleAddExpense=n.handleAddExpense.bind(Object(C.a)(n)),n.handleSaveEdit=n.handleSaveEdit.bind(Object(C.a)(n)),n}return Object(x.a)(a,[{key:"componentDidMount",value:function(){this.getCurrencies()}},{key:"componentDidUpdate",value:function(){var e=this.state.settledFields;this.props.editing&&!e&&this.setEditingFields()}},{key:"getCurrencies",value:function(){(0,this.props.fetchCurrencies)()}},{key:"setEditingFields",value:function(){var e=this.props.editingExpense,t={value:e.value,description:e.description,currency:e.currency,method:e.method,tag:e.tag};this.setState(Object(m.a)({settledFields:!0},t))}},{key:"handleAddExpense",value:function(){var e=this;(0,this.props.fetchCurrencies)().then((function(){var t=e.state,a=t.value,n=t.description,r=t.currency,l=t.method,c=t.tag,i=e.props,o=i.currencies;(0,i.addExpense)({value:a,description:n,currency:r,method:l,tag:c,exchangeRates:o}),e.setState({value:0,description:"",currency:"USD",method:"defaultSelect",tag:"defaultSelect"})}))}},{key:"handleSaveEdit",value:function(){var e=this.state,t=e.value,a=e.description,n=e.currency,r=e.method,l=e.tag,c=this.props,i=c.saveExpense,o=c.editingExpense,s=Object(m.a)(Object(m.a)({},o),{},{value:t,description:a,currency:n,method:r,tag:l});i(o.id,s),this.setState({value:0,description:"",currency:"USD",method:"defaultSelect",tag:"defaultSelect",settledFields:!1})}},{key:"handleChange",value:function(e){var t=e.target,a=t.name,n=t.value;this.setState(Object(N.a)({},a,n))}},{key:"render",value:function(){var e=this.state,t=e.value,a=e.description,n=e.currency,l=e.method,c=e.tag,i=this.props,o=i.currencies,s=i.editing,u={value:t,description:a,currency:n,method:l,tag:c,supportedCurrencies:Array.isArray(o)?o:Object.keys(o),handleChange:this.handleChange};return r.a.createElement("div",{className:"form-expense d-flex flex-column"},r.a.createElement(X,u),s?r.a.createElement("button",{type:"button",onClick:this.handleSaveEdit,className:"btn btn-info align-self-center mt-2",disabled:0===t||""===a||"defaultSelect"===l||"defaultSelect"===c},"Editar despesa"):r.a.createElement("button",{type:"button",onClick:this.handleAddExpense,className:"btn btn-success align-self-center mt-2",disabled:0===t||""===a||"defaultSelect"===l||"defaultSelect"===c},"Adicionar despesa"))}}]),a}(n.Component),z=Object(o.b)((function(e){return{currencies:e.wallet.currencies,editing:e.wallet.editing,editingExpense:e.wallet.editingExpense}}),(function(e){return{fetchCurrencies:function(){return e(p())},addExpense:function(t){return e(function(e){return{type:"ADD_EXPENSE",expense:e}}(t))},saveExpense:function(t,a){return e(function(e,t){return{type:"SAVE_EXPENSE",id:e,expense:t}}(t,a))}}}))(Q);Q.defaultProps={editing:!1,editingExpense:{}};var q=a(24),W=function(e){Object(y.a)(a,e);var t=Object(j.a)(a);function a(){return Object(v.a)(this,a),t.apply(this,arguments)}return Object(x.a)(a,[{key:"render",value:function(){var e=this.props,t=e.expenses,a=e.removeExpense,n=e.editExpense,l=e.editing;return r.a.createElement("div",{className:"expenses-table"},r.a.createElement("table",{className:"table table-bordered"},r.a.createElement("thead",null,r.a.createElement("tr",{className:"table-header"},r.a.createElement("th",{scope:"col",className:"ps-2 pe-2 text-center"},"#"),r.a.createElement("th",{scope:"col"},"Valor"),r.a.createElement("th",{scope:"col"},"Descri\xe7\xe3o"),r.a.createElement("th",{scope:"col"},"M\xe9todo de pagamento"),r.a.createElement("th",{scope:"col"},"Tag"),r.a.createElement("th",{scope:"col"},"Moeda"),r.a.createElement("th",{scope:"col"},"C\xe2mbio utilizado"),r.a.createElement("th",{scope:"col"},"Valor convertido"),r.a.createElement("th",{scope:"col"},"Moeda de convers\xe3o"),r.a.createElement("th",{scope:"col"},"Editar/Excluir"))),r.a.createElement("tbody",null,t.map((function(e,t){return r.a.createElement("tr",{key:"expense-".concat(e.id)},r.a.createElement("th",{scope:"row",className:"text-center"},"".concat(t+1)),r.a.createElement("td",null,e.value),r.a.createElement("td",null,e.description),r.a.createElement("td",null,e.method),r.a.createElement("td",null,e.tag),r.a.createElement("td",null,e.exchangeRates[e.currency].name.split("/")[0]),r.a.createElement("td",null,parseFloat(e.exchangeRates[e.currency].ask).toFixed(2)),r.a.createElement("td",null,parseFloat(parseFloat(e.value)*parseFloat(e.exchangeRates[e.currency].ask)).toFixed(2)),r.a.createElement("td",null,"Real"),r.a.createElement("td",{className:" cell-buttons d-flex align-items-center justify-content-center"},r.a.createElement("button",{type:"button","data-testid":"edit-btn",onClick:function(){return n(e.id)},disabled:l},r.a.createElement(q.a,{size:25})),r.a.createElement("button",{type:"button","data-testid":"delete-btn",onClick:function(){return a(e.id)},disabled:l},r.a.createElement(q.b,{size:30}))))})))))}}]),a}(n.Component),Z=Object(o.b)((function(e){return{expenses:e.wallet.expenses,editing:e.wallet.editing}}),(function(e){return{removeExpense:function(t){return e(function(e){return{type:"REMOVE_EXPENSE",id:e}}(t))},editExpense:function(t){return e(function(e){return{type:"EDIT_EXPENSE",id:e}}(t))}}}))(W);W.defaultProps={editing:!1};var $=function(e){Object(y.a)(a,e);var t=Object(j.a)(a);function a(){return Object(v.a)(this,a),t.apply(this,arguments)}return Object(x.a)(a,[{key:"render",value:function(){return r.a.createElement(M,null)}}]),a}(r.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(i.a,null,r.a.createElement(o.a,{store:g},r.a.createElement($,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[36,1,2]]]);
//# sourceMappingURL=main.ddb0715b.chunk.js.map